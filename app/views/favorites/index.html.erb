<%= render "/shared/header" %>
<%= render "/shared/clickable-avatar" %>

<div class="main-container">
  <h1>Your favorites list<hr> </h1>

  <ul class="container-product">
    <% @products.each do |product|%>
      <%= link_to product_path(product) do %>
          <div class="card-product">
            <% if product.picture.attached? %>
                  <%= cl_image_tag (product.picture.key), class: "card-product-img"%>
                  <% favorite = Favorite.find_by(user_id: current_user.id, product_id: product.id) %>
                  <% if favorite.nil? %>
                    <%= link_to favorites_path(product: product), method: :post, remote: true do %>
                    <div class="heart">
                      <i class="fas fa-heart"></i>
                    </div>
                    <% end %>
                  <% else %>
                    <%= link_to favorite_path(favorite), method: :delete, remote: true do  %>
                    <div class="heart">
                      <i class="fas fa-heart"></i>
                    </div>
                    <% end %>
                  <% end %>

            <% end %>
            <div class="card-product-description-container">
              <p class="card-product-title"> <%= product.name %> </p>
              <div class="card-product-description trait_below">
                <p> <%= product.brand.name %></p>
                <p class="product-score"> <i class="fas fa-leaf"> </i> 89/100</p>
              </div>
            </div>
          </div>
      <% end %>
    <% end %>
  </ul>
</div>
